<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract Generator</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/document_generator/css/contracts.css">
    <link rel="icon" type="image/x-icon" href="assets/images/favicon_regcris.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>

<body>
    <!-- Top Bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top hamburger" style="padding-top: 30px; padding-bottom: 30px;">
        <div class="container-fluid">
            <!-- Hamburger button for mobile -->
            <button class="navbar-toggler d-md-none" type="button" id="sidebarToggle" aria-label="Toggle sidebar">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- Optional: Add your logo or brand name here -->
            <img id="companyLogo" src="/document_generator/assets/images/regcris_logo.png" alt="Logo" style="height: 30px; margin: 0 10px; cursor:pointer;" onclick="location.reload();" draggable="false">
        </div>
    </nav>

    <!-- Sidebar -->
    <nav class="bg-light sidebar" id="sidebar">
        <!-- Logo section for mobile -->
        <div class="sidebar-header d-md-none">
            <div class="d-flex align-items-center justify-content-between p-3">
                <span class="navbar-brand mb-0 h5">Contract Generator</span>
                <button type="button" class="btn-close" id="sidebarClose" aria-label="Close sidebar"></button>
            </div>
        </div>
        <div class="pt-3">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link active ps-4" href="contracts.html">
                        <i class="bi bi-file-earmark-text me-2"></i> Contracts
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Sidebar overlay for mobile -->
    <div class="sidebar-overlay d-md-none" id="sidebarOverlay"></div>

    <!-- Main Content -->
    <main class="main-content px-md-4" style="margin-bottom: 30px;">
        <div class="pt-3">
            <h1>CONTRACTS</h1>

            <!-- Employee Contract Form -->
            <div class="card mt-4">
                <div class="card-header">
                    <h3>Employee Contract Form</h3>
                </div>
                <div class="card-body">
                    <form id="contractForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="company" class="form-label">Company <span class="text-danger">*</span></label>
                                <select class="form-select" id="company" required>
                                    <option value="">Select Company</option>
                                    <option value="trade-marketing">Trade Marketing Solutions Inc.</option>
                                    <option value="regcris">Regcris Marketing Network</option>
                                    <option value="prestige">Prestige Promotions Inc.</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="employment-type" class="form-label">Employment Type <span class="text-danger">*</span></label>
                                <select class="form-select" id="employment-type" required>
                                    <option value="">Select Type</option>
                                    <option value="PROBATIONARY">Probationary</option>
                                    <option value="CONTRACTUAL">Contractual</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">Full Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="name" style="text-transform: capitalize;" required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="address" class="form-label">Address <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="address" style="text-transform: capitalize;" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="email" required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label">Phone Number <span class="text-danger">*</span></label>
                                <div class="input-group">
                                    <span class="input-group-text">+63</span>
                                    <input type="tel" class="form-control" id="phone" pattern="[0-9]{10}" maxlength="10" placeholder="9123456789" oninput="this.value = this.value.replace(/[^0-9]/g, '')" required>
                                </div>
                                <small class="text-muted">Enter 10-digit mobile number</small>
                            </div>
                        </div>

                        <div class="row">
                            <!-- <div class="col-md-6 mb-3">
                                <label class="form-label">Title <span class="text-danger">*</span></label>
                                <div class="mt-2">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="title" id="title-sir" value="sir" required>
                                        <label class="form-check-label" for="title-sir">
                                            Sir
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="title" id="title-maam" value="maam" required>
                                        <label class="form-check-label" for="title-maam">
                                            Ma'am
                                        </label>
                                    </div>
                                </div>
                            </div> -->

                            <div class="col-md-6 mb-3">
                                <label for="position" class="form-label">Position <span class="text-danger">*</span></label>
                                <select class="form-select" id="position" required>
                                    <option value="">Select Position</option>
                                    <option value="merchandiser">Merchandiser</option>
                                    <option value="promodiser">Promodiser</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="start-date" class="form-label">Start Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="start-date" required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="client" class="form-label">Client <span class="text-danger">*</span></label>
                                <select class="form-select" id="client" required>
                                    <option value="">Select Client</option>
                                    <option value="zesto">Zesto</option>
                                    <option value="ajinomoto">Ajinomoto</option>
                                    <option value="comfoods">Comfoods</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="employee-id" class="form-label">Employee ID <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="employee-id" maxlength="17" placeholder="Up to 17 characters" required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="salary" class="form-label">Salary <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="salary" step="0.01" placeholder="0.00" required>
                            </div>
                        </div>

                        <div class="mt-4 text-end">
                            <button type="button" class="btn btn-light text-danger me-2" id="resetConfirmBtn">
                                <span class="d-inline d-lg-none"><i class="bi bi-arrow-counterclockwise"></i></span>
                                <span class="d-none d-lg-inline"><i class="bi bi-arrow-counterclockwise"></i> Reset Form</span>
                            </button>
                            <button type="button" class="btn btn-outline-secondary me-2" id="previewBtn" disabled>
                                <span class="d-inline d-lg-none"><i class="bi bi-eye"></i></span>
                                <span class="d-none d-lg-inline"><i class="bi bi-eye"></i> Preview</span>
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-file-earmark-plus"></i> Generate Contract
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Reset Confirmation Modal -->
    <div class="modal fade" id="resetConfirmModal" tabindex="-1" aria-labelledby="resetConfirmLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="resetConfirmLabel">Confirm Reset</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to reset the form? All entered data will be lost.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmResetBtn">Yes, Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Contract Preview Modal -->
    <div class="modal fade" id="contractPreviewModal" tabindex="-1" aria-labelledby="contractPreviewLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contractPreviewLabel">Contract Preview</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="contractPreviewBody">
                    <!-- Contract preview will be injected here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary position-relative" id="downloadPdfBtn">
                        <span id="downloadLoader" class="spinner-border spinner-border-sm me-1 d-none" role="status" aria-hidden="true"></span>
                        <i class="bi bi-download me-1"></i> Download PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>
    <script src="/document_generator/js/contracts.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Enable/disable Preview button based on form validity
            const contractForm = document.getElementById('contractForm');
            const previewBtn = document.getElementById('previewBtn');

            if (contractForm && previewBtn) {
                contractForm.addEventListener('input', function() {
                    previewBtn.disabled = !contractForm.checkValidity();
                });
            }
            
            // Sidebar toggle functionality
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const sidebarClose = document.getElementById('sidebarClose');

            if (sidebarToggle && sidebar && sidebarOverlay) {
                // Toggle sidebar on hamburger click
                sidebarToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('show');
                    sidebarOverlay.classList.toggle('show');
                    document.body.classList.toggle('sidebar-open');
                });

                // Close sidebar when clicking overlay
                sidebarOverlay.addEventListener('click', function() {
                    sidebar.classList.remove('show');
                    sidebarOverlay.classList.remove('show');
                    document.body.classList.remove('sidebar-open');
                });

                // Close sidebar when clicking close button
                if (sidebarClose) {
                    sidebarClose.addEventListener('click', function() {
                        sidebar.classList.remove('show');
                        sidebarOverlay.classList.remove('show');
                        document.body.classList.remove('sidebar-open');
                    });
                }

                // Close sidebar on window resize if screen becomes larger
                window.addEventListener('resize', function() {
                    if (window.innerWidth >= 768) {
                        sidebar.classList.remove('show');
                        sidebarOverlay.classList.remove('show');
                        document.body.classList.remove('sidebar-open');
                    }
                });

                // Close sidebar when pressing Escape key
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && sidebar.classList.contains('show')) {
                        sidebar.classList.remove('show');
                        sidebarOverlay.classList.remove('show');
                        document.body.classList.remove('sidebar-open');
                    }
                });
            }

            // Reset confirmation modal logic
            const resetConfirmBtn = document.getElementById('resetConfirmBtn');
            const resetConfirmModal = new bootstrap.Modal(document.getElementById('resetConfirmModal'));
            const confirmResetBtn = document.getElementById('confirmResetBtn');

            if (resetConfirmBtn && confirmResetBtn && contractForm) {
                resetConfirmBtn.addEventListener('click', function(e) {
                    resetConfirmModal.show();
                });

                confirmResetBtn.addEventListener('click', function() {
                    contractForm.reset();
                    document.getElementById('previewBtn').disabled = true;
                    resetConfirmModal.hide();
                });
            }
        });
    </script>
</body>

</html>
